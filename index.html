<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TÃ¬m xem ai thÃ­ch báº¡n ğŸ’—</title>

<style>
body{
  margin:0;
  background: linear-gradient(135deg,#d9f7f3,#eefcff);
  font-family:system-ui, Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
  color:#2b4f60;
}

.box{
  width:92%;
  max-width:420px;
  background:rgba(255,255,255,0.75);
  backdrop-filter: blur(20px);
  padding:26px;
  border-radius:26px;
  box-shadow:0 18px 45px rgba(0,0,0,0.15);
  text-align:center;
}

input{
  width:100%;
  padding:14px;
  border-radius:25px;
  border:1px solid #bfe9e4;
  margin-top:10px;
  font-size:16px;
}

button{
  margin-top:12px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:25px;
  background:#7be0d6;
  color:white;
  font-size:17px;
  cursor:pointer;
  transition:.2s;
}

button:active{transform:scale(0.96)}

#noBtn{
  background: linear-gradient(135deg,#ff4d6d,#ff0033);
  box-shadow:0 6px 18px rgba(255,0,60,0.35);
  position:relative;
}

.progress{
  width:100%;
  height:16px;
  background:#eefcff;
  border-radius:20px;
  margin-top:18px;
  overflow:hidden;
}

.bar{
  height:100%;
  width:0%;
  background:#7be0d6;
}

.log{
  margin-top:14px;
  text-align:left;
  height:120px;
  overflow:hidden;
  font-size:14px;
}

/* scan nháº¥p nhÃ¡y */
body.scanning{
  animation: scanFlash 0.7s infinite;
}

@keyframes scanFlash{
  0%{filter:brightness(1)}
  50%{filter:brightness(1.25)}
  100%{filter:brightness(1)}
}

/* flash khi ra káº¿t quáº£ */
body.flash{
  animation: flash 0.3s;
}

@keyframes flash{
  from{background:white}
  to{background:linear-gradient(135deg,#d9f7f3,#eefcff)}
}

/* tim bay */
.heart{
  position:absolute;
  animation: float 6s linear infinite;
  pointer-events:none;
}

@keyframes float{
  from{transform:translateY(100vh)}
  to{transform:translateY(-10vh)}
}

.again-btn{
  margin-top:14px;
  background:#ff9ecb;
}
</style>
</head>

<body>

<div class="box" id="main">

<h2>NÃ y báº¡n Ä‘Ã¡ng yÃªu ğŸ§</h2>
<p>Báº¡n cÃ³ muá»‘n biáº¿t ai Ä‘ang thÃ­ch báº¡n khÃ´ng? âœ¨</p>

<button onclick="goName()">CÃ³</button>
<button id="noBtn">KhÃ´ng</button>

</div>

<script>
  let savedName = "Báº¡n";
let lastResult = null;

/* ===== NÃšT KHÃ”NG CHáº Y TRá»N ===== */

function moveBtn(){
  const btn=document.getElementById("noBtn");
  if(!btn) return;

  btn.style.position="fixed";

  const x=Math.random()*(window.innerWidth-btn.offsetWidth);
  const y=Math.random()*(window.innerHeight-btn.offsetHeight);

  btn.style.left=x+"px";
  btn.style.top=y+"px";
}

document.addEventListener("mousemove",e=>{
  const btn=document.getElementById("noBtn");
  if(!btn) return;

  const rect=btn.getBoundingClientRect();
  const dx=e.clientX-(rect.left+rect.width/2);
  const dy=e.clientY-(rect.top+rect.height/2);
  const dist=Math.sqrt(dx*dx+dy*dy);

  if(dist<120) moveBtn();
});

document.addEventListener("click",e=>{
  if(e.target.id==="noBtn") moveBtn();
});


/* ===== NHáº¬P TÃŠN ===== */

function goName(){
  document.getElementById("main").innerHTML=`
    <h2>Nháº­p tÃªn cá»§a báº¡n ğŸ’—</h2>
    <input id="name" placeholder="TÃªn cá»§a báº¡n...">
    <button onclick="scan()">KhÃ¡m phÃ¡ âœ¨</button>
  `;
}


/* ===== SCAN ===== */

function scan(){

  const name = document.getElementById("name")?.value || savedName || "Báº¡n";
  savedName = name;   // â­ lÆ°u tÃªn Ä‘á»ƒ quÃ©t láº¡i khÃ´ng cáº§n nháº­p

  document.getElementById("main").innerHTML=`
    <h2>Äang káº¿t ná»‘i trÃ¡i tim...</h2>

    <div class="progress">
      <div class="bar" id="bar"></div>
    </div>

    <div class="log" id="log"></div>
  `;

  document.body.classList.add("scanning");

  const logs=[
    "ğŸ” Äang quÃ©t thÃ´ng tin...",
    "ğŸ’¬ PhÃ¢n tÃ­ch ngÆ°á»i hay nháº¯n tin",
    "ğŸ“¸ Xem láº¡i khoáº£nh kháº¯c",
    "ğŸ˜³ PhÃ¡t hiá»‡n tÃ­n hiá»‡u",
    "ğŸ’— TÃ¬m tháº¥y rung Ä‘á»™ng",
    "âœ¨ XÃ¡c Ä‘á»‹nh danh tÃ­nh..."
  ];

  let p=0,i=0;
  const bar=document.getElementById("bar");
  const log=document.getElementById("log");

  const interval=setInterval(()=>{

    p+=2;
    bar.style.width=p+"%";

    if(p%14===0 && i<logs.length){
      const line=document.createElement("div");
      line.textContent=logs[i++];
      log.appendChild(line);
      log.scrollTop=log.scrollHeight;
    }

    if(p>=100){
      clearInterval(interval);
      document.body.classList.remove("scanning");
      showResult(name);
    }

  },160);
}


/* ===== Káº¾T QUáº¢ ===== */

function showResult(name){

  const results=[
    "CHÃNH Báº N ğŸ˜³",
    "NgÆ°á»i ngá»“i cáº¡nh báº¡n ğŸ‘€",
    "Má»™t ngÆ°á»i ráº¥t gáº§n ğŸ’—",
    "NgÆ°á»i báº¡n khÃ´ng ngá» ğŸ˜",
    "TOP SECRET ğŸ”’",
    "NgÆ°á»i Ä‘ang Ä‘á»c káº¿t quáº£ nÃ y ğŸ¤­",
    "Crush bÃ­ máº­t ğŸ’˜",
    "Báº¡n thÃ¢n giáº£ vá» vÃ´ tÆ° ğŸ˜¶"
  ];

  // ğŸ¯ CHá»ŒN NGáºªU NHIÃŠN 5 Káº¾T QUáº¢
  const pool=[];
  while(pool.length<5){
    const r=results[Math.floor(Math.random()*results.length)];
    if(!pool.includes(r)) pool.push(r);
  }

  document.getElementById("main").innerHTML=`
    <h2>Káº¿t quáº£ cho <b>${name}</b> ğŸ’—</h2>
    <p>Äang chá»n ngÆ°á»i phÃ¹ há»£p nháº¥t...</p>

    <h1 id="finalResult">ğŸ¤– PhÃ¢n tÃ­ch...</h1>

    <button class="again-btn" onclick="scan()">ğŸ”„ QuÃ©t láº¡i</button>
  `;

  const resultEl=document.getElementById("finalResult");

  // ğŸ° XOAY LIÃŠN Tá»¤C TRONG 5 KQ
  const spin=setInterval(()=>{
    resultEl.textContent =
      pool[Math.floor(Math.random()*pool.length)];
  },70);

 // ğŸ¯ Sau 2s â†’ chá»‘t
setTimeout(()=>{

  clearInterval(spin);

  let final;

  // ğŸ‘‰ trÃ¡nh trÃ¹ng káº¿t quáº£ trÆ°á»›c
  do{
    final = results[Math.floor(Math.random()*results.length)];
  } while(final === lastResult);

  lastResult = final;

  resultEl.textContent = final;

  // ğŸ’¥ flash
  document.body.classList.add("flash");
  setTimeout(()=>document.body.classList.remove("flash"),300);

  // ğŸ’— tim ná»•
  for(let i=0;i<30;i++){
    createHeart();
  }

},2000);
  }

/* ===== TIM BAY ===== */

function createHeart(){
  const h=document.createElement("div");
  h.className="heart";
  h.textContent="ğŸ’—";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=(Math.random()*20+14)+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
}

setInterval(createHeart,450);

</script>
</body>
</html>

